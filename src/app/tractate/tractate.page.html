<ion-header  >
  <ion-toolbar color='primary' >
  <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>
      {{tractate}}
    </ion-title>
  </ion-toolbar>

</ion-header>




<ion-content id="tractate-content" padding>
      <ion-select [(ngModel)]="currentPage" (ionChange)="handleSelectDafChange()" interface='action-sheet'>
        <ion-select-option slot='end' text-center [value]="pageValues[i]" *ngFor="let page of tractatePages; let i = index;" ><strong>דף {{page}} </strong></ion-select-option>
      </ion-select>
      <!-- <audio preload='metadata' [autoplay]='isAutoplay' id="audio-player" #audioPlayer controls>
          <source [src]="this.audioURL" type='audio/mp3' >
            <p>Your browser doesn't support HTML5 audio. Here is a <a [href]="this.audioURL">link to the audio</a> instead.</p>
      </audio> -->
</ion-content>

<ion-footer *ngIf="audioState.canplay || currentPage === '02'" >
    <ion-toolbar color="primary">
        <ion-range min="0" color="light" [max]="audioState.metadata.durationSec" (ionFocus)="onSeekStart()" [value]='audioState.time.timeSec' (ionBlur)='onSeekEnd($event)'
                   name="seekbar" (ionChange)="onSeekChange($event)"  >
          <ion-label color="light" slot='start'>{{audioState.time.time}}</ion-label>
          <ion-label color="light" slot='end'>{{ audioState.metadata.duration }}</ion-label>
        </ion-range>
      </ion-toolbar>
    
      <ion-toolbar color="primary" padding>
        <ion-grid>
          <ion-row align-items-center id="media-controls">
            <ion-col>
            <ion-button class='seek-button' name="rewind"   fill='clear' (pressup)='handleSeekButtonsPressup($event)' (press)="handleSeekButtonsPress('backward')" (tap)='rewindJump()'   >
              <ion-icon name='rewind'  color="light" > </ion-icon>
            </ion-button>
            </ion-col>
            <ion-col *ngIf="!audioState.playing" >
            <ion-button  (click)="play()" fill='clear'  >
              <ion-icon   color="light"  name="play"></ion-icon>
            </ion-button>
            </ion-col>
            <ion-col *ngIf="!!audioState.playing" >
            <ion-button (click)="pause()" fill='clear'  >
              <ion-icon color="light" name="pause"></ion-icon>
            </ion-button>
            </ion-col>
            <ion-col>
            <ion-button (pressup)='handleSeekButtonsPressup()' (tap)='fastForwardJump()' (press)='handleSeekButtonsPress("forward")'   fill='clear'  >
              <ion-icon   color="light" name="fastforward"></ion-icon>
            </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-toolbar>
</ion-footer>